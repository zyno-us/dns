version: "2.1"
services:
  blocky:
    image: spx01/blocky
    container_name: blocky
    restart: always
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "443:443/tcp" # DNS over HTTPS (DoH) -- Cert required
      - "853:853/tcp" # DNS over TLS (DoT) -- Cert required
    environment:
      - TZ=America/New_York
    volumes:
      - ./config.yml:/app/config.yml
      # Certs generated by Certbot, required for DoH and DoT
      - '/etc/letsencrypt/live/dns.DOMAIN.TLD/fullchain.pem:/app/fullchain.pem'
      - '/etc/letsencrypt/live/dns.DOMAIN.TLD/privkey.pem:/app/privkey.pem'
